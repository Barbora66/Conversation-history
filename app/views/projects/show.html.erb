<div class="bg-white shadow-sm py-6 rounded-lg">
  <div class="flex justify-between mb-3 px-8">
    <h1 class="text-2xl tracking-wide font-medium"><%= @project.name %></h1>
    <%= link_to "Back", projects_path, class: "ml-2 rounded-md px-3.5 py-2 bg-gray-100 hover:bg-gray-50 inline-block font-normal" %>
  </div>

  <div class="border-b-2 border-gray-100"></div>

  <div class="flex justify-end items-center gap-3 px-8 mt-5">
    <div data-controller="submitter">
      <%= form_with model: @project, url: project_path(@project), method: :patch do |f| %>
        <div class="flex gap-2 items-center">
          <p class="text-sm text-gray-00">Close</p>
          <%= f.check_box :closed, data: { action: "click->submitter#submit" } %>
        </div>
        <%= f.button "Update", data: { submitter_target: "button" }, class: "hidden" %>
      <% end %>
    </div>

    <% if @project.closed %>
      <div class="bg-red-100 text-sm text-red-800 px-4 py-1 rounded-full">Closed</div>
    <% else %>
      <div class="bg-green-100 text-sm text-green-700 px-4 py-1 rounded-full">Open</div>
    <% end %>
  </div>

  <div class="px-8">
    <% @project.comments.each do |comment| %>
      <div class="mt-5 bg-violet-50 py-2.5 px-4 space-y-3 rounded-md">
        <div class="flex justify-between items-center">
          <div class="flex gap-3 items-center">
            <%= image_tag comment.user.avatar_url, class: "size-10 rounded-lg" %>
            <div class="flex flex-col gap-1 ">
              <%= comment.user.name %>
              <%= content_tag :span, l(comment.created_at, format: :short), class: "text-gray-600 text-xs" %>
            </div>
          </div>
          <div class="flex gap-2">
            <%= link_to "Edit", edit_project_comment_path(@project, comment), class: "text-xs text-violet-800 hover:text-violet-900 cursor-pointer" %>
            <%= button_to "Delete", project_comment_path(@project, comment), method: :delete, data: { turbo_confirm: "Are you sure"}, class: "block text-xs text-violet-800 hover:text-violet-900 cursor-pointer" %>
          </div>
        </div>
        <%= simple_format comment.content, class: "text-gray-600 text-sm font-normal " %>
      </div>
    <% end %>
  </div>

  <div class="mt-10 px-8">
    <%= render "comments/form", comment: Comment.new, url: project_comments_path(@project) %>
  </div>
</div>
